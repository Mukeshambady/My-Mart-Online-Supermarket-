<div class="container-fluid">
    <!--Section: Main panel-->
    <!-- Section: Block Content -->
    <section>
        <!--Grid row-->
        <div class="row justify-content-between">
            <!--Grid column-->
            <div class="col ">
                <div class="media text-center ">
                    <div class="media-body  p-3">
                       <h3>User Ban List <i class="ml-1 far fa-user"></i></h3>
                    </div>
                </div>
            </div>
            <!--Grid column-->
            
        </div>
        <!--Grid row-->
    </section>
    <!-- Section: Block Content -->
</div>

<div class="container  py-3 z-depth-1 rounded">
    <!--Section: Content-->
    <section class="dark-grey-text">

        <!-- Shopping Cart table -->
        <div class="table-responsive">

            <table class="table product-table mb-0">

                <!-- Table head -->
                <thead class="mdb-color lighten-5">
                    <tr>
                        <th class="font-weight-bold">
                            <strong>#</strong>
                        </th>
                        <th class="font-weight-bold">
                            <strong>Image</strong>
                        </th>
                        <th class="font-weight-bold">
                            <strong>Name</strong>
                        </th>
                        <th class="font-weight-bold">
                            <strong>Address</strong>
                        </th>                        
                        <th class="font-weight-bold">Action</th>
                    </tr>
                </thead>
                <!-- /.Table head -->

                <!-- Table body -->
                <tbody>

                    <!--  row -->
                    {{#each userDetails}}
                    <tr>
                        <th class="align-middle" scope="row" id="{{this._id}}">{{numbering @index}}</th>
                        <td>
                            <img src="/user-profile-pic/{{this.profilePicture}}" alt="Profile Picture" class="img-fluid"
                                style="width: 50px;height:50px;">

                        </td>
                        <td><strong class="productName">{{this.name}} </strong>
                         <p class="text-muted">{{this.phoneNuumber}}</p>
                        </td>
                        <td>
                            <strong>{{this.address}}</strong>

                        </td>             

                        <td>
                               <a href="javascript:void(0)" id="{{this._id}}" class="btn btn-sm btn-success banClass"
                                data-toggle="Unban" data-placement="top" data-toggle="Un ban User"
                                title="Unban User"><i class="fas fa-check"></i>
                            </a>
                        </td>
                    </tr>
                    {{/each}}
                    <!-- /. row -->


                </tbody>
                <!-- /.Table body -->

            </table>

        </div>
        <!-- /.Shopping Cart table -->

    </section>
    <!--Section: Content-->
    <!-- Session Modal -->
    <section>


        <!-- Ban deaer Modal -->
        <div class="modal fade" id="banUserModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
            aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog modal-notify modal-warning" role="document">
                <!--Content-->
                <div class="modal-content">
                    <!--Header-->
                    <div class="modal-header">
                        <p class="heading lead">Ban User </p>

                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" class="white-text">&times;</span>
                        </button>
                    </div>

                    <!--Body-->
                    <div class="modal-body">
                        <div class="text-center">
                            <i class="fas fa-ban fa-4x mb-3 animated rotateIn"></i>
                            <p>Are you sure..?</p>
                            <p>Ban :
                                <strong class="text-warning" id="banName"></strong>
                            </p>
                        </div>
                    </div>

                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <a type="button" data-record-id="24" class="btn btn-warning btn-ok">Ban User <i
                                class="fas fa-ban ml-1 text-white"></i></a>
                        <a type="button" class="btn btn-outline-warning waves-effect" data-dismiss="modal">No,
                            thanks</a>
                    </div>
                </div>
                <!--/.Content-->
            </div>
        </div>

        <!-- Ban dealer Modal-->
        <!-- Ban deaer Modal -->
        <div class="modal fade" id="deleteUserModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
            aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog modal-notify modal-danger" role="document">
                <!--Content-->
                <div class="modal-content">
                    <!--Header-->
                    <div class="modal-header">
                        <p class="heading lead">Delate User </p>

                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" class="white-text">&times;</span>
                        </button>
                    </div>

                    <!--Body-->
                    <div class="modal-body">
                        <div class="text-center">
                            <i class="fas fa-trash fa-4x mb-3 animated rotateIn"></i>
                            <p>Are you sure..?</p>
                            <p>Delete :
                                <strong class="text-danger" id="delName"></strong>
                            </p>
                        </div>
                    </div>

                    <!--Footer-->
                    <div class="modal-footer justify-content-center">
                        <a type="button" data-record-id="23" class="btn btn-danger btn-ok">Delete Now <i
                                class="fas fa-trash ml-1 text-white"></i></a>
                        <a type="button" class="btn btn-outline-danger waves-effect" data-dismiss="modal">No,thanks</a>
                    </div>
                </div>
                <!--/.Content-->
            </div>
        </div>
        <!-- Ban dealer Modal-->
    </section>
    <!-- Session Modal End-->
</div>
<!--Section: Main panel-->

<!--Section: modal-->
<section>
    <!-- Ban deaer Modal -->
    <div class="modal fade" id="unBanUserModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
        aria-hidden="true" data-backdrop="static" >
        <div class="modal-dialog modal-notify modal-success" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header">
                    <p class="heading lead">Un-Ban Product</p>

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true" class="white-text">&times;</span>
                    </button>
                </div>

                <!--Body-->
                <div class="modal-body">
                    <div class="text-center">
                        <i class="fas fa-check fa-4x mb-3 animated rotateIn"></i>
                        <p>Click Active to Unban</p>
                        <p>
                        <strong class="text-success" id="banName"></strong>
                        </p>
                    </div>
                </div>

                <!--Footer-->
                <div class="modal-footer justify-content-center">
                    <a type="button" data-record-id="24" class="btn btn-success btn-ok">Active <i
                            class="fas fa-check ml-1 text-white"></i></a>
                    <a type="button" class="btn btn-outline-success waves-effect" data-dismiss="modal">No,
                        thanks</a>
                </div>
            </div>
            <!--/.Content-->
        </div>
    </div>

    <!-- Ban dealer Modal-->
</section>



<script>
    //ban deatails    

    $('.banClass').on('click', function (e) {
        var $row = $(this).closest('tr')
        var id = $(this).attr('id')
        var nameTxt = $row.find('.storeName').text().trim();
        $('#banName').html(nameTxt)
        $('.btn-ok', '#unBanUserModal').data('recordId', id);
        $("#unBanUserModal").modal('show')
    });

    $('#unBanUserModal').on('click', '.btn-ok', function (e) {
        var $modalDiv = $(e.delegateTarget);
        var id = $(this).data('recordId');
        $.ajax({
            type: "post",
            url: "/dealer/unbanUser",
            data: { id: id },
            success: function (response) {
                if (response) {
                    
                    $('#' + id).parents("tr").remove();
                    toastr.success('User Unbanned');
                }
            }
        });
        $modalDiv.modal('hide')
    });

</script>



